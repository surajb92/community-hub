{% extends 'base.html' %}

{% block head %}
<title>Communication Hub</title>
<script type="text/javascript">
const uname = "{{user}}"
// const room = "{{room}}"
</script>
<script src="{{ url_for('static', filename='js/chat_handler.js') }}"></script>
{% endblock %}

{% block body %}
<div class="content">
	<h1 style="text-align: center">Main Hub</h1>
	<div id="container">
		<ul class="chat-list" id="chat-list">
		{% for m in chats %}
			{% if m.sender == user %}
			<div class="message-item self-message-item">
				<small class="user-text">{{user}}</small>
				<div>{{ m.message }}</div>
				<small class="muted-text">{{ m.timestamp.strftime("%d/%m/%Y, %l:%M:%S %p") }}</small>
			</div>
			{% else %}
			<div class="message-item peer-message-item">
				<small class="peer-text">{{m.sender}}</small>
				<div>{{ m.message }}</div>
				<small class="muted-text-white">{{ m.timestamp.strftime("%d/%m/%Y, %l:%M:%S %p") }}</small>
			</div>
			{% endif %}
		{% endfor %}
		</ul>
	</div>
	<div id="userchatbox">
		<input type="text" placeholder="Enter message.." id="userchat" name="userchat" />
		<button type="submit" id="send-btn" onclick="sendMessage()">Send</button>
	</div>
</div>
<script src="{{ url_for('static', filename='js/login_handler.js') }}"></script>
{% endblock %}